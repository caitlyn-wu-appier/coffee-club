import React, { useState } from "react";

const FLOORS = [
  {
    id: "7F",
    items: [
      { key: "kettle", title: "FELLOW Stagg EKG é›»å­æº«æ§æ‰‹æ²–å£º ç™½ 600ml" },
      { key: "grinder", title: "1Z X-Ultra", link: "https://1zpresso.coffee/product/xultra/", burr: "1Z X-Ultra 40mm ä¸ƒèŠ¯åˆ€ç›¤" },
      { key: "scale", title: "é»‘é¡DUO" },
      { key: "dripper", title: "switch / v60 / æ˜ŸèŠ’ / å†°ç³" },
    ],
  },
  {
    id: "8F",
    items: [
      { key: "kettle", title: "Timemore Smart æº«æ§æ‰‹æ²–å£º é»‘ 800ml" },
      { key: "grinder", title: "æ³°æ‘© æ —å­S3 æ‰‹æ–ç£¨è±†æ©Ÿ", link: "https://www.jmi-mart.com/product/detail/1751876", burr: "æ —å­åˆ€ç›¤ S2C890", burrLink: "https://m.media-amazon.com/images/I/51f1N3s0qXL._AC_UF894,1000_QL80_.jpg" },
      { key: "scale", title: "HARIO åŒ—æ¥µæ˜Ÿå’–å•¡ç§¤" },
      { key: "dripper", title: "v60 / å·æµ / èŠ±ç“£" },
    ],
  },
  {
    id: "9F",
    items: [
      { key: "kettle", title: "FELLOW Stagg EKG é›»å­æº«æ§æ‰‹æ²–å£º é»‘ 600ml" },
      { key: "grinder", title: "æ³°æ‘©æ‰‹æ– C3", link: "https://buoncaffe.com.tw/products/timemore-grinder-c3/", burr: "C3 åˆ€ç›¤ S2C660", burrLink: "https://www.timemore.com.au/cdn/shop/products/Timemore-S2C660.jpg?v=1681275552&width=2048" },
      { key: "scale", title: "(ç„¡/å¾…è£œ)" },
      { key: "dripper", title: "v60 / å·æµ / å†°ç³" },
    ],
  },
];

function Icon({ type }) {
  const icons = {
    kettle: "â˜•",
    grinder: "ğŸŒ€",
    scale: "âš–ï¸",
    dripper: "ğŸ§Š",
  };
  return <div className="text-3xl">{icons[type]}</div>;
}

export default function CoffeeEquipmentInteractive() {
  const [activeFloorIndex, setActiveFloorIndex] = useState(0);
  const [selectedItem, setSelectedItem] = useState(null);
  const activeFloor = FLOORS[activeFloorIndex];

  return (
    <div className="min-h-screen bg-gray-50 text-gray-900 p-6 md:p-10 font-sans">
      <style>{`
        a.no-hover:hover {
          text-decoration: none !important;
          color: inherit !important;
        }
      `}</style>
      <div className="max-w-5xl mx-auto bg-white shadow-lg rounded-2xl overflow-hidden">
        <header className="flex items-center justify-between p-6 border-b">
          <div>
            <h1 className="text-2xl font-semibold">è¨­å‚™æ¸…å–®</h1>
            <p className="text-sm text-gray-500 mt-1">æ¨“å±¤æŒ‰é †åºé¡¯ç¤ºï¼š7F â†’ 8F â†’ 9Fã€‚é»æ“Šç‰©å“å¯æŸ¥çœ‹è©³æƒ…ã€‚</p>
          </div>
          <div className="flex gap-2">
            {FLOORS.map((f, idx) => (
              <button
                key={f.id}
                onClick={() => {
                  setActiveFloorIndex(idx);
                  setSelectedItem(null);
                }}
                className={`px-3 py-1 rounded-md text-sm font-medium ${idx === activeFloorIndex ? "bg-gray-900 text-white" : "bg-gray-100 text-gray-700"}`}
              >
                {f.id}
              </button>
            ))}
          </div>
        </header>

        <main className="grid grid-cols-1 md:grid-cols-3 gap-6 p-6 md:p-8">
          <section className="md:col-span-2">
            <div className="rounded-xl p-4 border bg-gray-50">
              <div className="grid grid-cols-2 sm:grid-cols-4 gap-4 items-center">
                {activeFloor.items.map((it) => (
                  <button
                    key={it.key + it.title}
                    onClick={() => setSelectedItem({ ...it, floor: activeFloor.id })}
                    className="group flex flex-col items-center gap-2 p-3 rounded-lg hover:shadow-md transition-shadow bg-white"
                  >
                    <Icon type={it.key} />
                    <div className="text-xs text-center text-gray-700 px-1 font-medium" style={{ maxWidth: 140 }}>{it.title}</div>
                    <div className="mt-1 text-xs text-gray-400">é»æ“ŠæŸ¥çœ‹</div>
                  </button>
                ))}
              </div>
            </div>
          </section>

          <aside className="md:col-span-1">
            <div className="sticky top-6 bg-gray-50 p-4 rounded-xl border h-full space-y-6">
              <div>
                <h3 className="text-sm font-semibold">è©³æƒ…é¢æ¿</h3>
                {!selectedItem ? (
                  <div className="text-sm text-gray-500 mt-3">å°šæœªé¸å–ä»»ä½•ç‰©å“ã€‚é»æ“Šå·¦å´çš„åœ–ç¤ºæŸ¥çœ‹ç´°ç¯€ã€‚</div>
                ) : (
                  <div className="mt-3 space-y-3">
                    <div>
                      <div className="text-sm text-gray-600">æ¨“å±¤</div>
                      <div className="font-medium">{selectedItem.floor}</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-600">è¨­å‚™</div>
                      <div className="font-medium">{selectedItem.title}</div>
                    </div>

                    {selectedItem.link && (
                      <div className="mt-4 border-t pt-3">
                        <div className="text-sm text-gray-600 font-medium mb-2">ç”¢å“é€£çµ</div>
                        <a
                          href={selectedItem.link}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="text-blue-600 text-sm block break-all no-hover"
                        >
                          å‰å¾€å•†å“é é¢
                        </a>
                      </div>
                    )}
                  </div>
                )}
              </div>

              {selectedItem?.burr && (
                <div className="border-t pt-3">
                  <h3 className="text-sm font-semibold mb-2">åˆ€ç›¤è³‡è¨Š</h3>
                  <div className="text-sm text-gray-700">{selectedItem.burr}</div>
                  {selectedItem.burrLink && (
                    <img
                      src={selectedItem.burrLink}
                      alt={selectedItem.burr}
                      className="mt-2 rounded-lg border object-contain max-h-60 w-full"
                    />
                  )}
                </div>
              )}
            </div>
          </aside>
        </main>

        {/* åˆ€ç›¤ä»‹ç´¹ */}
        <section className="p-8 bg-white border-t">
          <h2 className="text-2xl font-semibold mb-4">åˆ€ç›¤ä»‹ç´¹</h2>
          <div className="text-sm text-gray-700 leading-relaxed space-y-3">
            <p>åœ¨ç ”ç£¨å’–å•¡è±†éç¨‹ä¸­ï¼Œã€Œåˆ€ç›¤ã€æ˜¯ç›´æ¥å½±éŸ¿ç²‰ç²’åˆ†å¸ƒã€é¡†ç²’å‡å‹»åº¦èˆ‡é¢¨å‘³è¡¨ç¾çš„é—œéµå…ƒä»¶ã€‚æ ¹æ“š <a href="https://www.femobook.com.tw/blogs/coffee-information/186696" target="_blank" rel="noopener noreferrer" className="text-blue-600">Femobook</a> çš„åˆ†æï¼Œä¸åŒå½¢å¼çš„åˆ€ç›¤ï¼ˆå¹³åˆ€ã€éŒåˆ€ã€é¬¼é½’åˆ€ï¼‰å„æœ‰å…¶ç‰¹æ€§ã€‚</p>
            <ul className="list-disc list-inside space-y-1">
              <li><strong>å¹³åˆ€ï¼ˆFlatâ€¯Burrï¼‰</strong>ï¼šç²‰ç²’åˆ†å¸ƒé›†ä¸­ï¼Œé¢¨å‘³ä¹¾æ·¨ã€æ˜äº®ï¼Œé©åˆè¿½æ±‚å±¤æ¬¡åˆ†æ˜çš„é¢¨å‘³è¡¨ç¾ã€‚</li>
              <li><strong>éŒåˆ€ï¼ˆConicalâ€¯Burrï¼‰</strong>ï¼šç²‰ç²’é›™å³°åˆ†ä½ˆï¼Œé¢¨å‘³é†‡åšã€å±¤æ¬¡è±å¯Œï¼Œä¿ç•™æ›´å¤šé¦™æ°£ã€‚</li>
              <li><strong>é¬¼é½’åˆ€ï¼ˆSerratedâ€¯Burrï¼‰</strong>ï¼šç ”ç£¨é€Ÿåº¦å¿«ã€é¡†ç²’å‡å‹»ï¼Œé¢¨å‘³å¹³è¡¡ä¸”ä¹¾æ·¨ã€‚</li>
            </ul>
            <p>ç›®å‰å…¬å¸ä½¿ç”¨çš„åˆ€ç›¤å‹è™Ÿç‚º <strong>S2C890</strong> èˆ‡ <strong>S2C660</strong>ã€‚</p>
            
            <div className="overflow-x-auto flex gap-4 pb-4">
              <img src="https://ae01.alicdn.com/kf/S78f155549e64433cbdad5e1067d26ea8K.jpg" alt="S2C890" className="rounded-lg border mb-3 object-contain max-h-100 w-full" />
            </div>
            <p>åƒè€ƒæ–‡ä»¶ï¼š<a href="https://ptt.reviews/Coffee/E.NKiLFSkA6qEs" target="_blank" rel="noopener noreferrer" className="text-blue-600">[å™¨æ] å¸‚é¢å¸¸è¦‹æ‰‹æ–ç£¨è±†æ©Ÿçš„éŒåˆ€è¨­è¨ˆç†è«– - PTTè©•åƒ¹</a></p>

          </div>
        </section>

        {/* æ¿¾æ¯ä»‹ç´¹å€å¡Š */}
        <section className="p-8 bg-white border-t">
          <h2 className="text-2xl font-semibold mb-4">æ¿¾æ¯ä»‹ç´¹</h2>
          <div className="overflow-x-auto flex gap-4 pb-4">
            {[
              {
                name: 'V60 æ¿¾æ¯',
                img: 'https://w7.pngwing.com/pngs/717/935/png-transparent-brewed-coffee-espresso-dolce-gusto-hario-coffee-glass-coffee-saucer-thumbnail.png',
                desc: 'ç¶“å…¸èºæ—‹è‚‹éª¨è¨­è¨ˆï¼Œæµé€Ÿå¿«ï¼Œé¢¨å‘³ä¹¾æ·¨æ˜äº®ã€‚',
                link: 'https://www.hario.com.tw/?product=v60%e9%80%8f%e6%98%8e02%e6%a8%b9%e8%84%82%e6%bf%be%e6%9d%af'
              },
              {
                name: 'Switch æ¿¾æ¯',
                img: 'https://m.media-amazon.com/images/I/61D-zsF39HL._AC_SX679_.jpg',
                desc: 'çµåˆæµ¸æ³¡èˆ‡æ¿¾æ»´ï¼Œå¯æ§æ™‚é–“èˆ‡æµé€Ÿï¼Œèƒå–å±¤æ¬¡æ›´è±å¯Œã€‚',
                link: 'https://www.hario.com.tw/?product=%e6%b5%b8%e6%bc%ac%e5%bc%8f%e6%bf%be%e6%9d%af%e7%b5%84'
              },
              {
                name: 'å·æµæ¿¾æ¯',
                img: 'https://www.fengjen.com.tw/upload/catalog_b/twL_catalog_23J16_vbw4h9zkAc.jpg',
                desc: 'æ°´æµé›†ä¸­ã€èƒå–ç©©å®šï¼Œé©åˆä¸­æ·±ç„™ï¼Œå£æ„Ÿåšå¯¦ã€‚',
                link: 'https://www.fengjen.com.tw/catalog-detail/352/'
              },
              {
                name: 'æ˜ŸèŠ’æ¿¾æ¯',
                img: 'https://i1.momoshop.com.tw/1727693320/goodsimg/0010/681/959/10681959_R1.webp',
                desc: 'æ˜Ÿå‹è‚‹éª¨å¸¶ä¾†ä¸­åº¸æµé€Ÿèˆ‡å‡å‹»èƒå–ï¼Œé¢¨å‘³å¹³è¡¡ã€‚',
                link: 'https://www.momoshop.com.tw/goods/GoodsDetail.jsp?i_code=10681959&Area=search&mdiv=403&oid=1_3&cid=index&kw=%E6%98%9F%E8%8A%92%E6%BF%BE%E6%9D%AF'
              },
              {
                name: 'èŠ±ç“£æ¿¾æ¯',
                img: 'https://resize-image.vocus.cc/resize?norotation=true&quality=80&url=https%3A%2F%2Fimages.vocus.cc%2F79bbda9c-2264-4e55-9231-23d08d0d389a.jpg&width=740&sign=_0IZN_GbUEOD0nMADGuCGHid4ZeXpX0wRGrIz86tzso',
                desc: 'èŠ±ç“£ç‹€å…§å£å¢é€²å°æµèˆ‡æ’æ°£ï¼Œæ›´å¤šçµ²æ»‘çš„å£æ„Ÿï¼Œå±¤æ¬¡æ˜é¡¯ï¼Œæº«æ½¤å…¥å£',
                link: 'https://vocus.cc/article/5c6d0de2fd89780001eb3e01'
              },
              {
                name: 'å†°ç³æ¿¾æ¯',
                img: 'https://cdn.store-assets.com/s/1163940/i/78773780.jpeg',
                desc: 'é€æ˜çµæ§‹ä¾¿æ–¼è§€å¯Ÿæµé€Ÿï¼Œ é«˜é€šé€æ€§é¿å…å¡æ°´ã€‚',
                link: 'https://www.xn--14us3q.tw/collections/%E5%92%96%E5%95%A1%E6%BF%BE%E6%9D%AF/products/%E6%B3%B0%E6%91%A9%E5%92%96%E5%95%A1-%E6%A8%B9%E8%84%82%E5%86%B0%E7%9E%B301%E6%BF%BE%E6%9D%AF-%E6%A5%B5%E9%80%9F%E7%89%88-'
              }
            ].map((cup) => (
              <div key={cup.name} className="min-w-[240px] bg-gray-50 rounded-xl p-4 border flex-shrink-0">
                <div className="rounded-md w-full h-44 overflow-hidden bg-white border">
                  <img src={cup.img} alt={cup.name} className="w-full h-full object-contain" />
                </div>
                <h3 className="text-sm font-semibold mt-3 mb-1">{cup.name}</h3>
                <p className="text-xs text-gray-600 leading-relaxed min-h-[2.5rem]">{cup.desc}</p>
                {cup.link && (
                  <a
                    href={cup.link}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-xs text-blue-600 no-hover inline-block mt-2"
                  >
                    æŸ¥çœ‹è©³æƒ…
                  </a>
                )}
              </div>
            ))}
          </div>
        </section>
        
        {/* Appier å’–å•¡åœ°åœ–å€å¡Š */}
        <section className="p-8 bg-white border-t">
          <h2 className="text-2xl font-semibold mb-4">Appier å’–å•¡åœ°åœ–</h2>
          <a href="https://www.google.com/maps/d/edit?mid=1NjYyXrB2906wevRDK0G3SUQUTgWb9Bw&usp=sharing">https://www.google.com/maps/d/edit?mid=1NjYyXrB2906wevRDK0G3SUQUTgWb9Bw&usp=sharing</a>
        </section>

      </div>
    </div>
  );
}

